<!doctype html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="utf-8" />
    <title>마이페이지 - CatchMind 1:1</title>
    <link
            href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
            rel="stylesheet"
    />
</head>
<body class="bg-light">

<header th:replace="layouts/index :: global-header"></header>

<main class="container py-4">

    <section class="mb-4">
        <h1 class="h3 fw-bold mb-3">마이페이지</h1>

        <div class="card">
            <div class="card-body">
                <p class="mb-1">
                    <strong>아이디 :</strong>
                    <span th:text="${player.name}">userId</span>
                </p>
                <p class="mb-1">
                    <strong>누적 점수 :</strong>
                    <span th:text="${totalScore}">0</span>
                </p>
                <p class="mb-0">
                    <strong>플레이한 게임 수 :</strong>
                    <span th:text="${gamesPlayed}">0</span>
                </p>
            </div>
        </div>
    </section>

    <!-- 게임별 라운드 기록 -->
    <section>
        <h2 class="h5 mb-2">게임 기록</h2>

        <div th:if="${#lists.isEmpty(histories)}">
            <p class="text-muted">아직 플레이한 게임이 없습니다.</p>
        </div>

        <div th:if="${!#lists.isEmpty(histories)}">
            <table class="table table-sm table-striped align-middle">
                <thead>
                <tr>
                    <th>게임 ID</th>
                    <th>R1</th>
                    <th>R2</th>
                    <th>R3</th>
                    <th>R4</th>
                    <th>R5</th>
                    <th>R6</th>
                    <th>총점</th>
                </tr>
                </thead>
                <tbody>
                <tr th:each="h : ${histories}">
                    <td th:text="${h.gameId}">uuid</td>

                    <!-- 라운드 결과 + 점수 같이 보여주기 예: O(3점), X(0점) -->
                    <td th:text="${h.round1Result} + '(' + (${h.round1Score} ?: 0) + '점)'">O(3점)</td>
                    <td th:text="${h.round2Result} + '(' + (${h.round2Score} ?: 0) + '점)'">X(0점)</td>
                    <td th:text="${h.round3Result} + '(' + (${h.round3Score} ?: 0) + '점)'">O(4점)</td>
                    <td th:text="${h.round4Result} + '(' + (${h.round4Score} ?: 0) + '점)'">X(0점)</td>
                    <td th:text="${h.round5Result} + '(' + (${h.round5Score} ?: 0) + '점)'">O(5점)</td>
                    <td th:text="${h.round6Result} + '(' + (${h.round6Score} ?: 0) + '점)'">X(0점)</td>

                    <td th:text="${h.totalScore}">12</td>
                </tr>
                </tbody>
            </table>
        </div>
    </section>

    <div class="mt-3">
        <a href="/" class="btn btn-secondary">홈으로</a>
    </div>

</main>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>